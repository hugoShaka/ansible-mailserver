---
jobs:
  - job: Lint
    pool:
      vmImage: 'Ubuntu 16.04'
    steps:
      - script: |
          pip3 install setuptools wheel
          pip3 install ansible-lint yamllint
        displayName: 'Install linters'

      - script: |
          find . -type f -name '*.yml' | \
          grep -v 'venv' | \
          xargs python3 -m yamllint
        displayName: 'Lint yaml'

      - script: python3 -m ansiblelint test/mailserver-vagrant.yml
        displayName: 'Lint ansible'
